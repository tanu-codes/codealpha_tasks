<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Responsive Image Gallery</title>
  <style>
    :root{
      --gap: 12px;
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #38bdf8;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, Roboto, system-ui, sans-serif;
      background: linear-gradient(180deg,#071122 0%, #081426 100%);
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      line-height:1.4;
      padding:28px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:20px;
      margin-bottom:18px;
    }
    h1{font-size:20px;margin:0}
    .controls{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center
    }
    .btn{
      background:var(--glass);
      border:1px solid rgba(255,255,255,0.04);
      color:inherit;padding:8px 12px;border-radius:10px;cursor:pointer;
      transition:transform .18s ease, background .18s;
      font-size:14px
    }
    .btn:hover{transform:translateY(-3px);background:rgba(255,255,255,0.03)}
    .btn.active{outline:2px solid var(--accent);}
    .filters{display:flex;gap:8px}

    /* gallery grid */
    .gallery{
      display:grid;
      grid-template-columns: repeat(4,1fr);
      gap:var(--gap);
      align-items:start;
    }
    @media (max-width:1100px){.gallery{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:760px){.gallery{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:420px){.gallery{grid-template-columns:1fr}}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border-radius:12px;overflow:hidden;position:relative;
      box-shadow:0 6px 20px rgba(3,7,18,0.6);
      transition:transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s;
    }
    .card:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 18px 40px rgba(2,6,15,0.65)}

    .thumb{
      display:block;width:100%;height:220px;object-fit:cover;display:block;
      transition:transform .38s ease, filter .28s ease, opacity .25s;
    }
    .meta{
      padding:10px 12px;display:flex;align-items:center;justify-content:space-between;
    }
    .meta .title{font-size:13px}
    .meta .cat{font-size:12px;opacity:0.8}

    /* hover overlay */
    .overlayBtn{
      position:absolute;left:12px;top:12px;padding:6px 8px;border-radius:8px;background:rgba(0,0,0,0.35);
      backdrop-filter:blur(6px);font-size:13px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;opacity:0;transform:translateY(-6px);
      transition:opacity .18s, transform .18s
    }
    .card:hover .overlayBtn{opacity:1;transform:translateY(0)}

    /* lightbox */
    .lightbox{
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(3,7,18,0.75);
      z-index:1200;padding:24px;visibility:hidden;opacity:0;transition:opacity .18s,visibility .18s;
    }
    .lightbox.open{visibility:visible;opacity:1}
    .lightbox-inner{
      max-width:1100px;width:100%;max-height:90vh;background:transparent;position:relative;display:flex;flex-direction:column;gap:12px;align-items:center;
    }
    .lightbox img{max-width:100%;max-height:76vh;object-fit:contain;border-radius:10px;box-shadow:0 20px 60px rgba(0,0,0,0.7)}
    .lb-caption{color:#cfeefc;opacity:0.95;text-align:center}

    .navBtn{
      position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);border:none;color:#fff;padding:14px;border-radius:10px;cursor:pointer;backdrop-filter:blur(6px);
      box-shadow:0 8px 26px rgba(2,6,15,0.6)
    }
    .navBtn:hover{transform:translateY(-50%) scale(1.03)}
    .prev{left:12px}
    .next{right:12px}

    .closeBtn{position:absolute;right:18px;top:18px;padding:8px 10px;border-radius:10px;background:rgba(0,0,0,0.4);border:none;cursor:pointer}

    /* small controls row inside lightbox */
    .lb-controls{display:flex;gap:8px;align-items:center}
    .toggle{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);cursor:pointer;background:var(--glass)}

    /* hidden utility */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* subtle transition for filtering */
    .card[hidden]{display:none}
    .filtered-out{opacity:0.08;transform:scale(.98)}

  </style>
</head>
<body>
  <header>
    <h1>Responsive Image Gallery</h1>
    <div class="controls">
      <div class="filters" role="tablist" aria-label="Categories">
        <button class="btn active" data-filter="all">All</button>
        <button class="btn" data-filter="nature">Nature</button>
        <button class="btn" data-filter="city">City</button>
        <button class="btn" data-filter="people">People</button>
      </div>
      <div style="width:12px"></div>
      <div class="lb-controls">
        <button class="btn" id="toggle-grayscale">Grayscale</button>
        <button class="btn" id="toggle-sepia">Sepia</button>
      </div>
    </div>
  </header>

  <main>
    <section class="gallery" id="gallery">
      <!-- Each .card has data attributes for category and title. Replace src with your images. -->
      <!-- Using picsum.photos as placeholders - swap with your own URLs -->

      <article class="card" data-category="nature" data-title="Misty forest">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1018/1200/800" alt="Misty forest"/>
        <div class="meta"><div class="title">Misty forest</div><div class="cat">Nature</div></div>
      </article>

      <article class="card" data-category="city" data-title="City lights">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1011/1200/800" alt="City lights"/>
        <div class="meta"><div class="title">City lights</div><div class="cat">City</div></div>
      </article>

      <article class="card" data-category="people" data-title="Portrait">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1005/1200/800" alt="Portrait"/>
        <div class="meta"><div class="title">Portrait</div><div class="cat">People</div></div>
      </article>

      <article class="card" data-category="nature" data-title="Beach sunset">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1016/1200/800" alt="Beach sunset"/>
        <div class="meta"><div class="title">Beach sunset</div><div class="cat">Nature</div></div>
      </article>

      <article class="card" data-category="city" data-title="Old street">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1020/1200/800" alt="Old street"/>
        <div class="meta"><div class="title">Old street</div><div class="cat">City</div></div>
      </article>

      <article class="card" data-category="people" data-title="Smiling person">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1027/1200/800" alt="Smiling person"/>
        <div class="meta"><div class="title">Smiling person</div><div class="cat">People</div></div>
      </article>

      <article class="card" data-category="nature" data-title="Mountain range">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1032/1200/800" alt="Mountain range"/>
        <div class="meta"><div class="title">Mountain range</div><div class="cat">Nature</div></div>
      </article>

      <article class="card" data-category="city" data-title="Bridge at night">
        <button class="overlayBtn" aria-label="Open image">Open</button>
        <img class="thumb" loading="lazy" src="https://picsum.photos/id/1033/1200/800" alt="Bridge at night"/>
        <div class="meta"><div class="title">Bridge at night</div><div class="cat">City</div></div>
      </article>

    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="lightbox-inner" role="document">
      <button class="closeBtn" id="lb-close" aria-label="Close">✕</button>
      <button class="navBtn prev" id="lb-prev" aria-label="Previous">◀</button>
      <button class="navBtn next" id="lb-next" aria-label="Next">▶</button>

      <img id="lb-image" src="" alt="" />
      <div class="lb-caption" id="lb-caption"></div>
    </div>
  </div>

  <script>
    (function(){
      const gallery = document.getElementById('gallery');
      const cards = Array.from(gallery.querySelectorAll('.card'));
      const filterBtns = Array.from(document.querySelectorAll('[data-filter]'));
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lb-image');
      const lbCaption = document.getElementById('lb-caption');
      const btnPrev = document.getElementById('lb-prev');
      const btnNext = document.getElementById('lb-next');
      const btnClose = document.getElementById('lb-close');
      const toggleGrey = document.getElementById('toggle-grayscale');
      const toggleSepia = document.getElementById('toggle-sepia');

      let currentIndex = -1;
      let filters = {grayscale:false, sepia:false, category:'all'};

      function applyImageFilters(el){
        const imgs = gallery.querySelectorAll('.thumb');
        imgs.forEach(img =>{
          let f = '';
          if(filters.grayscale) f += ' grayscale(1)';
          if(filters.sepia) f += ' sepia(0.6)';
          img.style.filter = f.trim();
        });
      }

      // Category filtering
      filterBtns.forEach(btn =>{
        btn.addEventListener('click', ()=>{
          filterBtns.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const cat = btn.getAttribute('data-filter');
          filters.category = cat;
          cards.forEach(card=>{
            const cardCat = card.dataset.category;
            if(cat === 'all' || cardCat === cat){
              card.hidden = false;
              card.classList.remove('filtered-out');
            } else {
              // either hide or dim
              card.hidden = true; // quick and simple
            }
          });
        });
      });

      // Lightbox open
      function openLightbox(index){
        currentIndex = index;
        const card = cards[currentIndex];
        if(!card) return;
        const img = card.querySelector('.thumb');
        lbImg.src = img.src;
        lbImg.alt = img.alt || card.dataset.title || '';
        lbCaption.textContent = card.dataset.title || '';
        lb.classList.add('open');
        lb.setAttribute('aria-hidden','false');
        // ensure correct filters applied inside lightbox too
        let f = '';
        if(filters.grayscale) f+=' grayscale(1)';
        if(filters.sepia) f+=' sepia(0.6)';
        lbImg.style.filter = f.trim();
        // focus close button for accessibility
        btnClose.focus();
      }

      function closeLightbox(){
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden','true');
        lbImg.src = '';
        currentIndex = -1;
      }

      function showNext(dir=1){
        if(currentIndex === -1) return;
        // find next visible card index
        const visible = cards.filter(c=>!c.hidden);
        const curCard = cards[currentIndex];
        let i = visible.indexOf(curCard);
        if(i === -1){ // current not visible in filtered set
          i = 0;
        }
        i = (i + dir + visible.length) % visible.length;
        const nextCard = visible[i];
        const idx = cards.indexOf(nextCard);
        openLightbox(idx);
      }

      // attach open handlers to image click and overlay button
      cards.forEach((card, idx)=>{
        const btn = card.querySelector('.overlayBtn');
        const img = card.querySelector('.thumb');
        btn.addEventListener('click', ()=> openLightbox(idx));
        img.addEventListener('click', ()=> openLightbox(idx));
      });

      // lightbox nav handlers
      btnPrev.addEventListener('click', ()=> showNext(-1));
      btnNext.addEventListener('click', ()=> showNext(1));
      btnClose.addEventListener('click', closeLightbox);

      // keyboard support
      document.addEventListener('keydown', (e)=>{
        if(lb.classList.contains('open')){
          if(e.key === 'ArrowRight') showNext(1);
          if(e.key === 'ArrowLeft') showNext(-1);
          if(e.key === 'Escape') closeLightbox();
        }
      });

      // close when clicking outside the image
      lb.addEventListener('click', (e)=>{
        if(e.target === lb) closeLightbox();
      });

      // filter toggles
      toggleGrey.addEventListener('click', ()=>{
        filters.grayscale = !filters.grayscale;
        toggleGrey.classList.toggle('active', filters.grayscale);
        applyImageFilters();
      });
      toggleSepia.addEventListener('click', ()=>{
        filters.sepia = !filters.sepia;
        toggleSepia.classList.toggle('active', filters.sepia);
        applyImageFilters();
      });

      // initial filter state
      applyImageFilters();

      // make gallery keyboard-focusable
      gallery.querySelectorAll('.card').forEach(c=>{
        c.setAttribute('tabindex','0');
        c.addEventListener('keydown', (e)=>{
          if(e.key === 'Enter'){
            const idx = cards.indexOf(c);
            openLightbox(idx);
          }
        });
      });

      // responsive tweak: if user resizes, ensure current visible index still valid
      window.addEventListener('resize', ()=>{/* no-op presently */});

      // Expose for debugging (optional)
      window.__gallery = {cards, openLightbox, closeLightbox};

    })();
  </script>
</body>
</html>
